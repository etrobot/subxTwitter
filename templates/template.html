<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GPT Subscripton for Twitter List</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Dark theme styles */

        body.dark {
            background-color: #1f2937;
            color: #f8fafc;
        }
        body.dark input,
        body.dark select {
            background-color: #374151;
            color: #f8fafc;
            border: 0;
        }

        /* Flexbox styles */
        .flex-container {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 1rem;
            position: fixed;
            top: 1rem;
            right: 1rem;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
<!--<div class="flex-grow"></div>-->
<div class="mb-16">
    <h1 id="title" class="text-center text-2xl font-bold">GPT Subscripton for Twitter List</h1>
    <form action="/subscribe" method="post" class="flex flex-col items-center mt-4">
        <input type="email" name="email" placeholder="Enter your email address" required class="border border-gray-300 rounded-md px-4 py-1 focus:outline-none focus:ring focus:border-blue-300 w-full max-w-xs">
                <div class="flex items-center mt-2 w-full max-w-xs">

        <input type="text" name="target_id" placeholder="Enter target ID" required class="border border-gray-300 rounded-md px-4 py-1 focus:outline-none focus:ring focus:border-blue-300 mt-2 w-full max-w-xs">
          <a href="https://help.twitter.com/en/using-x/x-lists" target="_blank" rel="noopener noreferrer" class="ml-1 flex items-center justify-center w-6 h-6 rounded-full text-white bg-blue-500">
    ?
  </a>
                </div>
        <div class="flex items-center mt-4 w-full max-w-xs">
            <span class="w-full" id="time-label">Daily Push Time</span>
            <input type="time"  name="mail_time" required  class="w-full border border-gray-300 rounded-md px-4 py-1 focus:ring focus:border-blue-300">
        </div>
        <input type="hidden" name="current_language" id="current-language" value="">
        <button type="submit" class="bg-blue-500 text-white px-4 py-1 rounded-md mt-4 w-full max-w-xs" id="subscribe-btn">Subscribe</button>
    </form>
    <div class="flex-container">
        <select id="language-select" class="border border-gray text-blue-500 px-2 py-1 rounded-md">
            <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
            <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
            <option value="en">English</option>
            <option value="ja">æ—¥æœ¬èª</option>
            <option value="ko">í•œêµ­ì–´</option>
        </select>

        <button id="theme-toggle" class="border border-gray text-blue-500 px-2 py-1 rounded-md">ğŸŒ’</button>
    </div>
</div>
    <script>
    document.getElementById('subscribe-form').addEventListener('submit', function (event) {
    // é˜»æ­¢è¡¨å•çš„é»˜è®¤æäº¤è¡Œä¸º
    event.preventDefault();

    // è·å–å½“å‰æ—¥æœŸå¯¹è±¡
    var currentDate = new Date();

    // è·å–ç”¨æˆ·é€‰æ‹©çš„æ—¶é—´
    var mailTimeValue = document.getElementById('mail-time').value;

    // å°†ç”¨æˆ·é€‰æ‹©çš„æ—¶é—´ä¸å½“å‰æ—¥æœŸæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²
    var selectedDateTimeString = currentDate.toISOString().slice(0, 10) + 'T' + mailTimeValue;

    // å°†æ‹¼æ¥åçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´æˆ³
    var selectedDateTimeTimestamp = new Date(selectedDateTimeString).getTime() / 1000;

    // åˆ¤æ–­ selectedDateTimeTimestamp æ˜¯å¦å°äºå½“å‰æ—¶é—´
    if (selectedDateTimeTimestamp < currentDate.getTime() / 1000) {
        // å¦‚æœæ˜¯ï¼Œåˆ™å¢åŠ ä¸€å¤©
        selectedDateTimeTimestamp += 24 * 60 * 60; // 24å°æ—¶ * 60åˆ†é’Ÿ * 60ç§’
    }

    // å°†å¢åŠ ä¸€å¤©åçš„æ—¶é—´æˆ³è®¾ç½®åˆ°éšè—çš„ input å…ƒç´ ä¸­
    document.getElementById('mail-time-timestamp').value = selectedDateTimeTimestamp;

    // æäº¤è¡¨å•
    this.submit();
});

        var userLang = navigator.language || navigator.userLanguage;
        var emailInput = document.querySelector('input[name="email"]');
        var targetIdInput = document.querySelector('input[name="target_id"]');
        var timeLabel = document.getElementById("time-label");
        var subscribeBtn = document.getElementById("subscribe-btn");
        var languageSelect = document.getElementById("language-select");
        var themeToggle = document.getElementById("theme-toggle");
        var body = document.body;

        // æ£€æµ‹æµè§ˆå™¨æˆ–ç³»ç»Ÿæ˜¯å¦å¤„äºæ·±è‰²ä¸»é¢˜æ¨¡å¼
        function isDarkTheme() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                // æµè§ˆå™¨æˆ–ç³»ç»Ÿå¤„äºæ·±è‰²ä¸»é¢˜æ¨¡å¼
                return true;
            } else {
                // æµè§ˆå™¨æˆ–ç³»ç»Ÿå¤„äºæµ…è‰²ä¸»é¢˜æ¨¡å¼
                return false;
            }
        }

        // Toggle theme function
        themeToggle.addEventListener("click", function() {
            body.classList.toggle("dark");
            if (body.classList.contains("dark")) {
                themeToggle.textContent = "â˜€";
            } else {
                themeToggle.textContent = "ï¸ğŸŒ’";
            }
        });

        // æ ¹æ®ç³»ç»Ÿä¸»é¢˜æ¨¡å¼åˆ‡æ¢åˆå§‹ä¸»é¢˜
        if (isDarkTheme()) {
            body.classList.add("dark");
            themeToggle.textContent = "â˜€";
        } else {
            body.classList.remove("dark");
            themeToggle.textContent = "ï¸ğŸŒ’";
        }

        // Function to set placeholders and titles based on language
        function setLanguage(selectedLanguage) {
            if (selectedLanguage === "zh-CN") {
                // è®¾ç½®ç®€ä½“ä¸­æ–‡å ä½ç¬¦å’Œæ ‡é¢˜
                emailInput.placeholder = "è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€";
                targetIdInput.placeholder = "è¯·è¾“å…¥ç›®æ ‡ID";
                timeLabel.textContent = "æ¯æ—¥æ¨é€æ—¶é—´";
                subscribeBtn.textContent = "è®¢é˜…/æ›´æ–°æ—¶é—´";
                document.getElementById("title").textContent = "Twitteråˆ—è¡¨çš„GPTè®¢é˜…";
            }else if (selectedLanguage === "zh-TW") {
                // è¨­å®šç°¡é«”ä¸­æ–‡ä½”ä½ç¬¦å’Œæ¨™é¡Œ
                 emailInput.placeholder = "è«‹è¼¸å…¥æ‚¨çš„éƒµä»¶åœ°å€";
                 targetIdInput.placeholder = "è«‹è¼¸å…¥ç›®æ¨™ID";
                 timeLabel.textContent = "æ¯æ—¥æ¨é€æ™‚é–“";
                 subscribeBtn.textContent = "è¨‚é–±/æ›´æ–°æ™‚é–“";
                 document.getElementById("title").textContent = "Twitteræ¸…å–®çš„GPTè¨‚é–±";
            }else if (selectedLanguage === "en") {
                // è®¾ç½®è‹±æ–‡å ä½ç¬¦å’Œæ ‡é¢˜
                emailInput.placeholder = "Enter your email address";
                targetIdInput.placeholder = "Enter target ID";
                timeLabel.textContent = "Daily Push Time";
                subscribeBtn.textContent = "Subscribe / Update Time";
                document.getElementById("title").textContent = "GPT Subscripton for Twitter List";
            } else if (selectedLanguage === "ja") {
                // è®¾ç½®æ—¥è¯­å ä½ç¬¦å’Œæ ‡é¢˜
                emailInput.placeholder = "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
                targetIdInput.placeholder = "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆIDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
                timeLabel.textContent = "æ¯æ—¥ã®ãƒ—ãƒƒã‚·ãƒ¥æ™‚é–“";
                subscribeBtn.textContent = "è³¼èª­/æ›´æ–°æ™‚é–“";
                document.getElementById("title").textContent = "Twitterãƒªã‚¹ãƒˆã®GPTã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³";
            } else if (selectedLanguage === "ko") {
                // è®¾ç½®éŸ©è¯­å ä½ç¬¦å’Œæ ‡é¢˜
                emailInput.placeholder = "ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”";
                targetIdInput.placeholder = "ëŒ€ìƒ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”";
                timeLabel.textContent = "ë§¤ì¼ í‘¸ì‹œ ì‹œê°„";
                subscribeBtn.textContent = "êµ¬ë…/ì—…ë°ì´íŠ¸ ì‹œê°„";
                document.getElementById("title").textContent = "Twitter ëª©ë¡ì„ ìœ„í•œ GPT êµ¬ë…";
            } else {
                // é»˜è®¤è®¾ç½®ä¸ºä¸­æ–‡å ä½ç¬¦å’Œæ ‡é¢˜
                emailInput.placeholder = "è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€";
                targetIdInput.placeholder = "è¯·è¾“å…¥ç›®æ ‡ID";
                timeLabel.textContent = "æ¯æ—¥æ¨é€æ—¶é—´";
                subscribeBtn.textContent = "è®¢é˜…";
                document.getElementById("title").textContent = "Twitteråˆ—è¡¨çš„GPTè®¢é˜…";
            }
        }

        // Initial set of placeholders and titles
        setLanguage(userLang);
        var defaultLanguageInput = document.getElementById("current-language");
        defaultLanguageInput.value = userLang;

        // Toggle language function
        languageSelect.addEventListener("change", function() {
            var selectedLanguage = languageSelect.value;
            setLanguage(selectedLanguage);
            // æ›´æ–°éšè— input çš„å€¼
            var currentLanguageInput = document.getElementById("current-language");
            currentLanguageInput.value = selectedLanguage;
        });
    </script>
</div>
</body>
</html>